<ion-header>
  <ion-navbar>
    <ion-title>{{app?.appData.title}}</ion-title>
  </ion-navbar>
</ion-header>


<ion-content *ngIf="loadedPage" class="bg">
  <div padding class="container center">
    <ion-card>
      <!--BASIC-->
      <ion-row padding class="no-padbottom">
        <ion-col col-auto>
          <div class="app-icon-placeholder" id="app-icon-placeholder">
            <img [src]="app?.appData.thumbIconURL || app?.appData.iconURL" alt="" (load)="loadedAppIcon(i)" class="app-icon" tappable imageViewer>
          </div>
        </ion-col>
        <ion-col>
          <div class="flex-dc">
            <div class="flex-item">
              <h2 class="app-title">{{app?.appData.title}}</h2>
            </div>
            <div class="flex-item">
              Type / Category: <span text-capitalize class="mleft-5 bold">{{app?.appData.type}} / {{app?.appData.category}}</span>
            </div>
            <div class="flex-item">
              <div class="flex-v">
                <span class="mright-5">Platforms: </span>
                <ion-icon *ngIf="app?.appData.platforms && app?.appData.platforms.web?.isCompatible" name="md-globe" class="mright-10 size-24"></ion-icon>
                <ion-icon *ngIf="app?.appData.platforms && app?.appData.platforms.android?.isCompatible" name="logo-android" color="android" class="mright-10 size-24"></ion-icon>
                <ion-icon *ngIf="app?.appData.platforms && app?.appData.platforms.desktop?.isCompatible" name="md-desktop" class="size-24"></ion-icon>
              </div>
            </div>
            <div class="flex-item">
              <div class="flex-v">
                <span class="mright-5">Date requested: </span>
                <span class="bold">{{app?.dateCreated | toFullDateAndTime}} <span>({{app?.dateCreated | timeFromNow}})</span></span>
              </div>
            </div>
          </div>
          <div class="flex-item">
            <div class="flex-v">
              <span class="mright-5">Created by: </span>
              <span class="owner-name bold">{{app?.userData.name}}</span>
              <img [src]="app?.userData.photoURL" alt="" class="owner-img">
            </div>
          </div>
        </ion-col>
        <ion-col col-auto>
          <button ion-button>Approve</button>
          <button ion-button color="danger">Reject</button>
        </ion-col>
      </ion-row>
     
      <!--TAGS eg. Opensource, Downloadable-->
      <ion-row padding-left>
        <div class="flex-h">
          <div class="flex-item">
            <ion-chip *ngIf="app?.appData.openSource.sourceCodeDownloadURL || app?.appData.openSource.sourceCodeURL">
              <ion-icon class="size-24" name="md-code-download"></ion-icon>
              <ion-label>Open Source</ion-label>
            </ion-chip>
            <ion-chip *ngIf="app?.appData.platforms.web?.demoURL">
              <ion-icon class="size-24" name="md-globe"></ion-icon>
              <ion-label>Web App Previewable</ion-label>
            </ion-chip>
            <ion-chip *ngIf="app?.appData.platforms.android.demoURL || app?.appData.platforms.android.releases[0].demoDownloadURL">
              <ion-icon class="size-24" name="logo-android"></ion-icon>
              <ion-label>Android App Downloadable</ion-label>
            </ion-chip>
            <ion-chip *ngIf="app?.appData.platforms.desktop.demoURL || app?.appData.platforms.android.demoDownloadURL ">
              <ion-icon class="size-24" name="md-desktop"></ion-icon>
              <ion-label>Desktop App Downloadable</ion-label>
            </ion-chip>
          </div>
        </div>
      </ion-row>

      <ion-row padding-left margin-top class="mleft-5" *ngIf="app?.appData.website || app?.appData.email">
        <h2 class="bold">Contact</h2>
      </ion-row>
      <ion-row padding-left class="mleft-5">
        <div class="flex-dc">
          <div class="flex-item" *ngIf="app?.appData.website">
            <div class="flex-v">
              <span class="mright-5">Website:</span>
              <span tappable (click)="launchURL(app?.appData.website)" class="bold link">{{app?.appData.website}}</span>
              <button ion-button clear small icon-only (click)="launchURL(app?.appData.website)">
                <ion-icon md-name="open_in_new" class="size-20" tappable></ion-icon>
              </button>
            </div>
          </div>
          <div class="flex-item" *ngIf="app?.appData.email" style="margin-top:-10px">
            <div class="flex-v">
              <span class="mright-5">Email address:</span>
              <span tappable (click)="launchEmail(app?.appData.email)" class="bold link mright-5">{{app?.appData.email}}</span>
              <button ion-button clear small icon-only (click)="copyText(app.appData.email)">
                <ion-icon md-name="content_copy" class="size-20" tappable></ion-icon>
              </button>
            </div>
          </div>
        </div>
      </ion-row>


      <!--SCREENSHOTS-->
      <ion-row>
        <div padding>
          <h2 class="pad-5 bold">Screenshots <ion-badge color="primary">{{app?.appData.screenshots?.length}}</ion-badge></h2>
        </div>
        <div class="ss-parent-container">
          <div *ngFor="let s of app?.appData.screenshots;let i=index" [id]="'shimmer-'+i" class="screenshot-placeholder shimmer mright-5">
            <img [src]="s?.low_res" alt="" class="screenshot" (load)="onScreenshotLoaded(i)" tappable imageViewer>
          </div>
        </div>
      </ion-row>

      <!--DESCRIPTION-->
      <ion-row padding>
        <div>
          <h2 class="bold">Short description</h2>
          <p>{{app?.appData.short_description}}</p>
        </div>
        <div margin-top>
          <h2 class="bold">Full description</h2>
          <p>{{app?.appData.full_description}}</p>
        </div>
      </ion-row>

      <!--OPENSOURCE-->
      <ion-item class="section" padding-left *ngIf="app?.appData.openSource.sourceCodeURL || app?.appData.openSource.sourceCodeDownloadURL">
        <h2 class="bold white">Open Source</h2>
      </ion-item>
      <ion-row padding>
        <div class="full-width" *ngIf="app?.appData.openSource.sourceCodeURL">
          <h3 class="bold">External source code URL</h3>
          <div class="flex">
            <span class="bold link flex-v" text-wrap tappable (click)="launchURL(app?.appData.openSource.sourceCodeURL)">{{app?.appData.openSource.sourceCodeURL}}</span>
            <button ion-button clear small icon-only (click)="launchURL(app?.appData.openSource.sourceCodeURL)">
              <ion-icon md-name="open_in_new" class="size-20" tappable></ion-icon>
            </button>
          </div>
        </div>
        <div class="full-width mtop-10" *ngIf="app?.appData.openSource.sourceCodeDownloadURL">
          <h3 class="bold">Internal source code</h3>
          <div class="os-container flex scroll-x">
            <div class="flex">
              <ion-col col-auto class="flex-hv pad-20">
                <ion-icon name="md-filing" color="primary" class="medium-icon"></ion-icon>
              </ion-col>
              <ion-row class="flex-h flex-dc">
                <span class="bold size-14">{{app?.appData.openSource?.sourceCodeFilename}}</span>
                <span>Size: {{app?.appData.openSource.sourceCodeFilesize | fileSize}}</span>
                <span>Uploaded on: {{app?.appData.openSource.dateCreated | toFullDateAndTime}}</span>
                <div class="flex">
                  <button ion-button (click)="downloadFile(app?.appData.openSource.sourceCodeDownloadURL)">Download</button>
                  <button ion-button color="danger" (click)="removeFile('remove_os_archive')">Remove</button>
                </div>
              </ion-row>
            </div>
          </div>
        </div>
      </ion-row>

      <!--PLATFORMS-->
      <!--DESKTOP-->
      <ion-item class="section" padding-left *ngIf="app?.appData.platforms.desktop.demoURL || app?.appData.platforms.desktop.demoDownloadURL">
        <h2 class="bold white">Desktop</h2>
      </ion-item>
      <ion-row padding>
        <div class="full-width" *ngIf="app?.appData.platforms.desktop.demoURL">
          <h3 class="bold">External archive URL</h3>
          <div class="flex">
            <span class="bold link flex-v" text-wrap tappable (click)="launchURL(app?.appData.platforms.desktop.demoURL)">{{app?.appData.platforms.desktop.demoURL}}</span>
            <button ion-button clear small icon-only (click)="launchURL(app?.appData.platforms.desktop.demoURL)">
              <ion-icon md-name="open_in_new" class="size-20" tappable></ion-icon>
            </button>
          </div>
        </div>
        <div class="full-width mtop-10" *ngIf="app?.appData.platforms.desktop.demoDownloadURL">
          <h3 class="bold">Internal archive</h3>
          <div class="os-container flex scroll-x">
            <div class="flex">
              <ion-col col-auto class="flex-hv pad-20">
                <ion-icon name="md-filing" color="primary" class="medium-icon"></ion-icon>
              </ion-col>
              <ion-row class="flex-h flex-dc">
                <span class="bold size-14">{{app?.appData.platforms.desktop?.demoFilename}}</span>
                <span>Size: {{app?.appData.platforms.desktop.demoFileSize | fileSize}}</span>
                <span>Uploaded on: {{app?.appData.platforms.desktop.dateCreated | toFullDateAndTime}}</span>
                <div class="flex">
                  <button ion-button (click)="downloadFile(app?.appData.platforms.desktop.demoDownloadURL)">Download</button>
                  <button ion-button color="danger" (click)="removeFile('remove_os_archive')">Remove</button>
                </div>
              </ion-row>
            </div>
          </div>
        </div>
      </ion-row>

    </ion-card>
  </div>

</ion-content>
