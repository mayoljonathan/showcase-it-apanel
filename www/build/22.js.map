{"version":3,"sources":["../../src/pages/user-accounts-tabs/add-administrator/add-administrator.module.ts","../../src/pages/user-accounts-tabs/add-administrator/add-administrator.ts"],"names":[],"mappings":"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","file":"22.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { AddAdministratorPage } from './add-administrator';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    AddAdministratorPage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(AddAdministratorPage),\r\n  ],\r\n})\r\nexport class AddAdministratorPageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/user-accounts-tabs/add-administrator/add-administrator.module.ts","import { Component } from '@angular/core';\r\nimport { IonicPage, NavController, NavParams,ViewController } from 'ionic-angular';\r\nimport { FormGroup, FormControl, FormBuilder, Validators, AbstractControl }   from '@angular/forms';\r\n\r\nimport { AppService,AdminService,UserService } from \"../../../shared/services/\";\r\nimport { DialogUtil } from \"../../../shared/utils/\";\r\n\r\nimport { Admin } from '../../../shared/models';\r\n\r\n// import * as EmailValidator from 'email-validator';\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-add-administrator',\r\n  templateUrl: 'add-administrator.html',\r\n  // directives: [FORM_DIRECTIVES, REACTIVE_FORM_DIRECTIVES]\r\n})\r\nexport class AddAdministratorPage {\r\n  \r\n  admin: Admin;\r\n\r\n  private form: FormGroup;\r\n  \r\n  useDefaultPassword:boolean = false;\r\n  submitAttempt:boolean = false;\r\n\r\n  // administratorForm: FormGroup;\r\n  // name: AbstractControl;\r\n  // email: AbstractControl;\r\n  // password: AbstractControl;\r\n  \r\n  constructor(\r\n    public formBuilder: FormBuilder,\r\n    public navCtrl: NavController,\r\n    public navParams: NavParams,\r\n    public adminService: AdminService,\r\n    public userService: UserService,\r\n    public viewCtrl: ViewController,\r\n    public dialogUtil: DialogUtil,\r\n  ) {\r\n    this.admin = new Admin();\r\n    this.admin.isSuperAdmin = false;\r\n    // this.form = formBuilder.group({\r\n    //   name: ['',Validators.compose([Validators.maxLength(50), Validators.pattern('[a-zA-Z ]*'), Validators.required]) ],\r\n    //   email: ['',Validators.compose([Validators.pattern('^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$'), Validators.required]) ],\r\n    //   password: ['',Validators.required]\r\n    // });\r\n    // this.administratorForm = this.formBuilder.group({\r\n    //   name: ['', Validators.compose([Validators.required])],\r\n    //   email: ['', Validators.compose([Validators.required])],\r\n    //   password: ['', Validators.compose([Validators.required, Validators.minLength(6)])],\r\n    // });\r\n    // this.name = this.administratorForm.controls['name'];\r\n    // this.email = this.administratorForm.controls['email'];\r\n    // this.password = this.administratorForm.controls['password'];\r\n    this.form = new FormGroup({\r\n        name: new FormControl('', [Validators.required,Validators.maxLength(50)]),\r\n        email: new FormControl('', Validators.compose([Validators.required, Validators.email])),\r\n        password: new FormControl({value:'',disabled: false}, [Validators.required,Validators.minLength(6)])\r\n    });\r\n  }\r\n\r\n  ionViewDidLoad() {\r\n    console.log('ionViewDidLoad AddAdministratorPage');\r\n  }\r\n  \r\n  setDefaultPassword(checked){\r\n    this.useDefaultPassword = checked;\r\n    checked ? this.form.controls.password.setValue('abc123') : this.form.controls.password.setValue('');\r\n  }\r\n\r\n  onSuperAdminChange(checked){\r\n    this.admin.isSuperAdmin = checked;\r\n  }\r\n\r\n  submitForm(form){\r\n    this.submitAttempt = true;\r\n    if(form.valid){\r\n      let data = form.value;\r\n      data['superAdmin'] = this.admin.isSuperAdmin;\r\n      this.dialogUtil.showLoader('Checking email address if it exists.');\r\n      this.adminService.checkEmailIfExists(data.email).then((res:any)=>{\r\n        if(res.exists){\r\n          this.dialogUtil.hideLoader();\r\n          return this.dialogUtil.showToast('Email address is taken. Please choose another one.', 4000, 'bottom');\r\n        }else{\r\n          this.dialogUtil.hideLoader();\r\n          this.dialogUtil.showLoader('Adding administrator account.');\r\n          this.adminService.addAdministrator(data).then(()=>{\r\n            this.dialogUtil.hideLoader();\r\n            this.dismiss();\r\n            return this.dialogUtil.showToast('Administrator account successfully added.', 4000, 'bottom');\r\n          },e=>{\r\n            this.dialogUtil.hideLoader();\r\n            this.dialogUtil.showToast(`An error has occured. ${e}`, 4000, 'bottom');\r\n          });\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  dismiss(){\r\n    this.viewCtrl.dismiss();\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/user-accounts-tabs/add-administrator/add-administrator.ts"],"sourceRoot":""}